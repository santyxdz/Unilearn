{% extends "base.html" %}

{% block title %}
Unilearn | Pregunta
{% endblock %}

{% block css %}
<style>
     .question{
         background-color: transparent;
         box-shadow: none;
    }
    .question > .panel-body{
        background-color: white;
        box-shadow: 0 1px 6px rgba(0,0,0,.12),0 1px 6px rgba(0,0,0,.12);

    }
    .panel-statement{
        background-color: khaki;
        box-shadow: 0 1px 6px rgba(0,0,0,.8),0 1px 6px rgba(0,0,0,.8);

        padding: 3px 10px;
        border: khaki 5px solid;
        border-radius: 20px;
    }
    .round-border-ima {
        border-radius: 20% / 20%;
        box-shadow: 0px 0px 5px #000;
        padding:0;
        -moz-transition: all 1s;
        -webkit-transition: all 1s;
        -o-transition: all 1s;
    }


</style>
{% endblock %}
{% block main %}
    <div class="row">
         <div class="question panel panel-primary col-md-6 col-md-offset-3 ">
            <div class="panel-heading">
                <h3 class="panel-title">Pregunta</h3>
            </div>
            <div class="panel-body">
                <div class="panel-statement">
                    <h4 class="panel-body">Enunciado</h4>
                    {{ question.statement }}
                    {%if question.image != "" %}
                        <div><center>
                            <img class="round-border-ima" src={{question.image}} style='width:55%;' border="0" alt="" >
                        </center></div>
                    {% endif %}
                </div>
                <div id="answers">
                {% if question.type == "msu_question" %}
                    {% for answer in question.answers %}
                    <div class="radio radio-primary"><label>
                    <input type="radio" name="options" id="optionsRadios" value='{{answer.id}}'>{{answer.text}}
                     </label>
                     </div>
                     {% endfor %}
                {% endif %}
                {% if question.type == "msm_question" %}
                    {% for answer in question.answers %}
                    <div class="checkbox">
                        <label><input type="checkbox" value="{{answer.id}}">{{answer.text}}</label>
                    </div>
                     {% endfor %}
                {% endif %}
                {% if question.type == "completation_question" %}
                    <div class="inputs">
                        <br><input type="text" name="txt" class="form-control" placeholder="Respuesta">
                    </div>
                {% endif %}
                </div>
                <div class="col-md-6 col-md-offset-3">
                     <button class="btn btn-default">Saltar</button>
                     <button type="submit" class="btn btn-primary" name="submit">Enviar</button>
                </div>
            </div>
         </div>
    </div>
{% endblock %}
{% block js %}
{% if question.type == "msu_question" %}
<script type="text/javascript">
$(document).ready(function()
{
    $("button[name=submit]").click(function () {
        	if( $("input[name='options']:radio").is(':checked')) {
                $.post("{{"/api/evaluate/"+question.id|string}}",{type:"msu",
                                        selected:"["+$('input:radio[name=options]:checked').val()+"]"
                                        },function(data){alert(data.message)},"json");
            } else{
                alert("Seleccione una Opci√≥n");
            }
    });
});
</script>
{% endif %}

{% if question.type == "completation_question" %}
<script type="text/javascript">
$(document).ready(function()
{
$("button[name=submit]").click(
    function () {
    if($("input[name='txt']:text").val() != ""){
        $.post("{{"/api/evaluate/"+question.id|string}}",{type:"completation",
                            selected: "[\""+$("input[name='txt']:text").val()+"\"]"
                            },function(data){
                                alert(data.message)
                            },"json");
    }
    else{
        alert("you must give an answer!");
    }
    });
    });
</script>
{% endif %}

{% if question.type == "clasification_question" or question.type == "pairing_question" %}
<script type="text/javascript">
function answerToJSON(){
    return "";
}
$(document).ready(function()
{
    $("button[name=submit]").click(
        function(){
            var answer_given = answerToJSON()
            if(answer_given != ""){
                $.post(
                    "{{"/api/evaluate" + question.id|string}}",
                    answer_given,
                    function(data){
                        alert(data.message)
                    },
                    "json"
                );
            }
            else{
                alert("You missed something or you have not match everything yet!");
            }
        }
    );
}
);
</script>
{% endif %}
{% if question.type == "msm_question" %}
<script type="text/javascript">
$(document).ready(function(){
    $("button[name=submit]").click(function(){
        var a = "[";
        $("input:checkbox:checked").each(function(){
            a+=$(this).val();
            a+=", "
        });
        a = a.substring(0,a.length-2)+"]";
        if(a.length<2){
            a = "[]";
        }
        $.post("{{"/api/evaluate/"+question.id|string}}",{type:"msm",
            selected:a},function(data){alert(data.message)},"json");
    });
});
</script>
{% endif %}
{% endblock %}
